{"ast":null,"code":"import _defineProperty from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/rachel/git/hackernews/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/rachel/git/hackernews/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './App.css';\nvar DEFAULT_QUERY = 'Redux';\nvar DEFAULT_HPP = '100';\nvar PATH_BASE = 'https://hn.foo.bar.com/api/v1';\nvar PATH_SEARCH = '/search';\nvar PARAM_SEARCH = 'query=';\nvar PARAM_PAGE = 'page=';\nvar PARAM_HPP = 'hitsPerPage=';\nvar list = [{\n  title: 'React',\n  url: 'https://facebook.github.io/react/',\n  author: 'Jordan Walke',\n  num_comments: 3,\n  points: 4,\n  objectID: 0\n}, {\n  title: 'Redux',\n  url: 'https://github.com/reactjs/redux',\n  author: 'Dan Abramov, Andrew Clark',\n  num_comments: 2,\n  points: 5,\n  objectID: 1\n}];\n\nvar isSearched = function isSearched(searchTerm) {\n  return function (item) {\n    return item.title.toLowerCase().includes(searchTerm.toLowerCase());\n  };\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      result: null,\n      searchKey: '',\n      searchTerm: DEFAULT_QUERY,\n      error: null\n    };\n    _this.needsToSearchTopStories = _this.needsToSearchTopStories.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setSearchTopStories = _this.setSearchTopStories.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchSearchTopStories = _this.fetchSearchTopStories.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSearchChange = _this.onSearchChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSearchSubmit = _this.onSearchSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDismiss = _this.onDismiss.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var searchTerm = this.state.searchTerm;\n      this.setState({\n        searchKey: searchTerm\n      });\n      this.fetchSearchTopStories(searchTerm);\n    }\n  }, {\n    key: \"needsToSearchTopStories\",\n    value: function needsToSearchTopStories(searchTerm) {\n      return !this.state.results[searchTerm];\n    }\n  }, {\n    key: \"fetchSearchTopStories\",\n    value: function fetchSearchTopStories(searchTerm) {\n      var _this2 = this;\n\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      axios(\"\".concat(PATH_BASE).concat(PATH_SEARCH, \"?\").concat(PARAM_SEARCH).concat(searchTerm, \"&\").concat(PARAM_PAGE).concat(page, \"&\").concat(PARAM_HPP).concat(DEFAULT_HPP)).then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        return _this2.setSearchTopStories(result.data);\n      }).catch(function (error) {\n        return _this2.setState({\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"setSearchTopStories\",\n    value: function setSearchTopStories(result) {\n      var hits = result.hits,\n          page = result.page;\n      var _this$state = this.state,\n          searchKey = _this$state.searchKey,\n          results = _this$state.results;\n      var oldHits = results && results[searchKey] ? results[searchKey].hits : [];\n\n      var updatedHits = _toConsumableArray(oldHits).concat(_toConsumableArray(hits));\n\n      this.setState({\n        results: _objectSpread({}, results, _defineProperty({}, searchKey, {\n          hits: updatedHits,\n          page: page\n        }))\n      });\n    }\n  }, {\n    key: \"onSearchChange\",\n    value: function onSearchChange(event) {\n      this.setState({\n        searchTerm: event.target.value\n      });\n    }\n  }, {\n    key: \"onSearchSubmit\",\n    value: function onSearchSubmit(event) {\n      var searchTerm = this.state.searchTerm;\n      this.setState({\n        searchKey: searchTerm\n      });\n\n      if (this.needsToSearchTopStories(searchTerm)) {\n        this.fetchSearchTopStories(searchTerm);\n      }\n\n      this.fetchSearchTopStories(searchTerm);\n      event.preventDefault();\n    }\n  }, {\n    key: \"onDismiss\",\n    value: function onDismiss(id) {\n      var _this$state2 = this.state,\n          searchKey = _this$state2.searchKey,\n          results = _this$state2.results;\n      var _results$searchKey = results[searchKey],\n          hits = _results$searchKey.hits,\n          page = _results$searchKey.page;\n\n      var isNotId = function isNotId(item) {\n        return item.objectID !== id;\n      };\n\n      var updatedHits = hits.filter(isNotId);\n      this.setState({\n        results: _objectSpread({}, results, _defineProperty({}, searchKey, {\n          hits: updatedHits,\n          page: page\n        }))\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          searchTerm = _this$state3.searchTerm,\n          results = _this$state3.results,\n          searchKey = _this$state3.searchKey,\n          error = _this$state3.error;\n      var page = results && results[searchKey] && results[searchKey].page || 0;\n      var list = results && results[searchKey] && results[searchKey].hits || [];\n      return React.createElement(\"div\", {\n        className: \"page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"interactions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Search, {\n        value: searchTerm,\n        onChange: this.onSearchChange,\n        onSubmit: this.onSearchSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Search\")), error ? React.createElement(\"div\", {\n        className: \"interactions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Something went wrong.\")) : React.createElement(Table, {\n        list: list,\n        onDismiss: this.onDismiss,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"interactions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: function onClick() {\n          return _this3.fetchSearchTopStories(searchKey, page + 1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"More\")));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar Search = function Search(_ref) {\n  var value = _ref.value,\n      onChange = _ref.onChange,\n      onSubmit = _ref.onSubmit,\n      children = _ref.children;\n  return React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    value: value,\n    onChange: onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, children));\n};\n\nvar Table = function Table(_ref2) {\n  var list = _ref2.list,\n      onDismiss = _ref2.onDismiss;\n  return React.createElement(\"div\", {\n    className: \"table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, list.map(function (item) {\n    return React.createElement(\"div\", {\n      key: item.objectID,\n      className: \"table-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: item.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, item.title)), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, item.author), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, item.num_comments), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, item.points), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: function onClick() {\n        return onDismiss(item.objectID);\n      },\n      className: \"button-inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Dismiss\")));\n  }));\n};\n\nvar Button =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(Button, _Component2);\n\n  function Button() {\n    _classCallCheck(this, Button);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Button).apply(this, arguments));\n  }\n\n  _createClass(Button, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          onClick = _this$props.onClick,\n          _this$props$className = _this$props.className,\n          className = _this$props$className === void 0 ? '' : _this$props$className,\n          children = _this$props.children;\n      return React.createElement(\"button\", {\n        onClick: onClick,\n        className: className,\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, children);\n    }\n  }]);\n\n  return Button;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/rachel/git/hackernews/src/App.js"],"names":["React","Component","axios","DEFAULT_QUERY","DEFAULT_HPP","PATH_BASE","PATH_SEARCH","PARAM_SEARCH","PARAM_PAGE","PARAM_HPP","list","title","url","author","num_comments","points","objectID","isSearched","searchTerm","item","toLowerCase","includes","App","props","state","result","searchKey","error","needsToSearchTopStories","bind","setSearchTopStories","fetchSearchTopStories","onSearchChange","onSearchSubmit","onDismiss","setState","results","page","then","response","json","data","catch","hits","oldHits","updatedHits","event","target","value","preventDefault","id","isNotId","filter","Search","onChange","onSubmit","children","Table","map","Button","onClick","className"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './App.css';\n\nconst DEFAULT_QUERY = 'Redux';\nconst DEFAULT_HPP = '100';\nconst PATH_BASE = 'https://hn.foo.bar.com/api/v1';\nconst PATH_SEARCH = '/search';\nconst PARAM_SEARCH = 'query=';\nconst PARAM_PAGE = 'page=';\nconst PARAM_HPP = 'hitsPerPage=';\n\nconst list = [\n  {\n    title: 'React',\n    url: 'https://facebook.github.io/react/',\n    author: 'Jordan Walke',\n    num_comments: 3,\n    points: 4,\n    objectID: 0,\n  },\n  {\n    title: 'Redux',\n    url: 'https://github.com/reactjs/redux',\n    author: 'Dan Abramov, Andrew Clark',\n    num_comments: 2,\n    points: 5,\n    objectID: 1,\n  },\n];\n\nconst isSearched = searchTerm => item => item.title.toLowerCase().includes(searchTerm.toLowerCase());\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      result: null,\n      searchKey: '',\n      searchTerm: DEFAULT_QUERY,\n      error: null,\n    };\n    this.needsToSearchTopStories = this.needsToSearchTopStories.bind(this);\n    this.setSearchTopStories = this.setSearchTopStories.bind(this);\n    this.fetchSearchTopStories = this.fetchSearchTopStories.bind(this);\n    this.onSearchChange = this.onSearchChange.bind(this);\n    this.onSearchSubmit = this.onSearchSubmit.bind(this);\n    this.onDismiss = this.onDismiss.bind(this);\n  }\n\n  componentDidMount() {\n    const { searchTerm } = this.state;\n    this.setState({ searchKey: searchTerm });\n    this.fetchSearchTopStories(searchTerm);\n  }\n\n  needsToSearchTopStories(searchTerm) {\n    return !this.state.results[searchTerm];\n  }\n\n  fetchSearchTopStories(searchTerm, page = 0) {\n    axios(`${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${searchTerm}&${PARAM_PAGE}${page}&${PARAM_HPP}${DEFAULT_HPP}`)\n      .then(response => response.json())\n      .then(result => this.setSearchTopStories(result.data))\n      .catch(error => this.setState({ error }));\n  }\n\n  setSearchTopStories(result) {\n    const { hits, page } = result;\n    const { searchKey, results } = this.state;\n    const oldHits = results && results[searchKey]\n      ? results[searchKey].hits\n      : [];\n    const updatedHits = [\n      ...oldHits,\n      ...hits\n    ];\n    this.setState({\n      results: { ...results, [searchKey]: {hits: updatedHits, page }}\n    });\n  }\n\n  onSearchChange(event) {\n    this.setState({ searchTerm: event.target.value });\n  }\n\n  onSearchSubmit(event) {\n    const { searchTerm } = this.state;\n    this.setState({ searchKey: searchTerm });\n    if (this.needsToSearchTopStories(searchTerm)) {\n      this.fetchSearchTopStories(searchTerm);\n    }\n    this.fetchSearchTopStories(searchTerm);\n    event.preventDefault();\n  }\n\n  onDismiss(id) {\n    const { searchKey, results } = this.state;\n    const { hits, page } = results[searchKey];\n    const isNotId = item => item.objectID !== id;\n    const updatedHits = hits.filter(isNotId);\n    this.setState({\n      results: {...results, [searchKey]: {hits: updatedHits, page}}\n    });\n  }\n\n  render() {\n    const { \n      searchTerm,\n      results, \n      searchKey, \n      error \n    } = this.state;\n\n    const page = (\n      results &&\n      results[searchKey] &&\n      results[searchKey].page\n    ) || 0;\n\n    const list = (\n      results &&\n      results[searchKey] &&\n      results[searchKey].hits) || [];\n    \n    return (\n      <div className=\"page\">\n        <div className=\"interactions\">\n          <Search\n            value={searchTerm}\n            onChange={this.onSearchChange}\n            onSubmit={this.onSearchSubmit}\n          >Search</Search>\n        </div>\n        {error\n          ? <div className=\"interactions\">\n            <p>Something went wrong.</p>\n          </div>\n          : <Table\n            list={list}\n            onDismiss={this.onDismiss}\n          />\n        }\n        <div className=\"interactions\">\n          <Button onClick={() => this.fetchSearchTopStories(searchKey, page + 1)}>\n            More\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst Search = ({ value, onChange, onSubmit, children }) =>\n  <form onSubmit={onSubmit}>\n    <input\n      type=\"text\"\n      value={value}\n      onChange={onChange}\n    />\n    <button type=\"submit\">\n      {children}\n    </button>\n  </form>;\n\n\nconst Table = ({ list, onDismiss }) => \n  <div className=\"table\">\n    {list.map(item =>\n      <div key={item.objectID} className=\"table-row\">\n        <span>\n          <a href={item.url}>{item.title}</a>\n        </span>\n        <span>{item.author}</span>\n        <span>{item.num_comments}</span>\n        <span>{item.points}</span>\n        <span>\n          <Button onClick={() => onDismiss(item.objectID)} className=\"button-inline\">\n            Dismiss\n          </Button>\n        </span>\n      </div>\n    )}\n  </div>;\n\nclass Button extends Component {\n  render() {\n    const {\n      onClick,\n      className = '',\n      children,\n    } = this.props;\n    return (\n      <button\n        onClick={onClick}\n        className={className}\n        type=\"button\"\n      >\n        {children}\n      </button>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}